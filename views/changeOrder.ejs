<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>การรถไฟแห่งประเทศไทย</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/css/style.css">

</head>

<body style="background: #f1f1f1;">
    <!-- Section Navbar -->
    <section>
        <nav id="nav-scroll" class="navbar navbar-expand-lg fixed-top">
            <div class="container">
                <div class="row" style="width: 100%; margin: auto;">
                    <div class="col-12 col-md-2 col-lg-2">
                        <div class="navbar-brand">
                            <a href="">
                                <img id="logo-scroll" class="logo" src="assets/image/logo.png" alt="">
                            </a>
                        </div>
                    </div>
                    <div class="col-12 col-md-10 col-lg-10">
                        <div class="clearfix">
                            <div class="float-end">
                                <!-- register & login -->
                                <ul class="navbar-nav">
                                    <li>

                                        <% if(ses==false){ %>
                                            <div class="nav-link">
                                                <img src="assets/image/icon3.png" alt="">
                                                <span class="text-header">
                                                    <a href="" data-bs-target="#login-form"
                                                        data-bs-toggle="modal">เข้าสู่ระบบ</a>
                                                    <span style="font-size: 25px;">|</span>
                                                    <a href="" data-bs-target="#register-form"
                                                        data-bs-toggle="modal">สมัครสมาชิก</a>
                                                </span>
                                            </div>
                                            <% }else{ %>
                                                <% login_data.forEach(function(item){ %>
                                                    <span class="text-header">
                                                        <a>
                                                            <%= item.First_Name %>
                                                        </a>
                                                        <a>
                                                            <%= item.Last_Name %>
                                                        </a>
                                                        <span style="font-size: 25px;">|</span>
                                                        <a href="/logout">ออกจากระบบ</a>
                                                    </span>
                                                    <% }) %>
                                                        <% } %>
                                    </li>
                                    <li>
                                        <div class="position-login nav-link">
                                            <a href="">
                                                <img src="assets/image/icon-alert.png" alt="">
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- button page -->
                        <div>
                            <ul class="navbar-nav text-header ">
                                <li><a href="/index" class="nav-link"> หน้าแรก</a></li>
                                <li>
                                    <% if(ses==true){ %>
                                        <a href="" data-bs-target="#history" data-bs-toggle="modal" class="nav-link">
                                            ประวัติการซื้อ
                                        </a>
                                        <% }else { %>
                                            <a href="" onclick="alert('กรุณาเข้าสู่ระบบ'); return false"
                                                class="nav-link">
                                                ประวัติการซื้อ
                                            </a>
                                            <% } %>

                                </li>
                                <li>
                                    <% if(ses==true){ %>
                                        <a href="" data-bs-target="#change" data-bs-toggle="modal" class="nav-link">
                                            เปลี่ยนแปลงตั๋ว
                                        </a>
                                        <% }else { %>
                                            <a href="" onclick="alert('กรุณาเข้าสู่ระบบ'); return false"
                                                class="nav-link">
                                                เปลี่ยนแปลงตั๋ว
                                            </a>
                                            <% } %>
                                </li>
                                <li>
                                    <% if(ses==true){ %>
                                        <a href="" data-bs-target="#cancel" data-bs-toggle="modal" class="nav-link">
                                            ยกเลิกตั๋วโดยสาร
                                        </a>
                                        <% }else { %>
                                            <a href="" onclick="alert('กรุณาเข้าสู่ระบบ'); return false"
                                                class="nav-link">
                                                ยกเลิกตั๋วโดยสาร
                                            </a>
                                            <% } %>

                                </li>
                                <li><a href="" class="nav-link"> สิทธิพิเศษ</a></li>
                                <li><a href="https://www.dticket.railway.co.th/DTicketPublicWeb/help/#bookticket"
                                        target="_blank" class="nav-link"> ศูนย์ความช่วยเหลือ</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </section>
    <!-- Action Modal   -->
    <section>
        <!-- Register -->
        <div class="container">
            <div class="modal" id="register-form">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h2 class="modal-title w-100">สมัครสมาชิก</h2>
                            <button class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body text-form">
                            <form action="register" method="post">
                                <div class=" clearfix mb-3 text-form">
                                    <div class="md-form">
                                        <input type="text" name="First_Name" placeholder="ชื่อ* "
                                            class="form-control validate w-50 float-start">
                                        <input type="text" name="Last_Name" placeholder="นามสกุล * "
                                            class="form-control validate w-50 float-end">
                                    </div>
                                </div>
                                <div class="md-form mb-3">
                                    <input type="text" name="Id_Card" placeholder="เลขประจำตัวประชาชน *"
                                        class="form-control validate">
                                </div>
                                <div class="md-form mb-3">
                                    <input type="text" name="Tel" placeholder="เบอร์โทรศัพท์"
                                        class="form-control validate">
                                </div>
                                <div class="md-form mb-3">
                                    <input type="text" name="Email" placeholder="อีเมล *" class="form-control validate">
                                </div>
                                <div class="md-form mb-3">
                                    <input type="text" name="Password" placeholder="รหัสผ่าน *"
                                        class="form-control validate">
                                </div>
                                <div class="md-form mb-3">
                                    <input type="text" placeholder="ยืนยันรหัสผ่าน *" class="form-control validate">
                                </div>
                                <button type="submit" class="btn-rgt">Signup</button>
                            </form>

                        </div>
                        <div class="modal-footer d-flex justify-content-center border-top-0">

                            <div class="footer-login">
                                <span>มีบัญชีอยู่แล้ว ? </span><a href="">เข้าสู่ระบบ</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Login -->
        <div class="container">
            <div class="modal" id="login-form">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h4 class="modal-title w-100">เข้าสู่ระบบ</h4>
                            <button class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body text-form">
                            <form action="login" method="post">
                                <div class="md-form mb-3">
                                    <input type="Email" name="Email" placeholder="อีเมล" class="form-control validate">
                                </div>
                                <div class="md-form mb-3">
                                    <input type="password" name="Password" placeholder="รหัสผ่าน"
                                        class="form-control validate">
                                </div>
                                <button type="submit" class="btn-rgt">Login</button>
                            </form>
                        </div>
                        <div class="modal-footer d-flex justify-content-center border-top-0">
                            <div class="footer-login">
                                <span>ยังไม่มีบัญชี ? </span><a href="">สมัครสมาชิก</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- information -->
        <div class="modal" id="info-form">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h2 class="modal-title w-100">กรอกข้อมูลผู้โดยสาร</h2>
                        <button class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body text-form">
                        <form action="updateorder" method="post">
                            <% login_data.forEach(function(item){ %>
                                <div class=" clearfix mb-3 text-form">
                                    <div class="md-form">
                                        <input type="text" name="First_Name" value="<%= item.First_Name %>"
                                            class="form-control validate w-50 float-start"
                                            style="background: #d1d1d1; border: black solid 0.5px;" readonly>
                                        <input type="text" name="Last_Name" value="<%= item.Last_Name %>"
                                            class="form-control validate w-50 float-end"
                                            style="background: #d1d1d1; border: black solid 0.5px;" readonly>
                                    </div>
                                </div>
                                <div class="md-form mb-3">
                                    <input type="text" name="Id_Card" value="<%= item.Id_Card %>"
                                        class="form-control validate"
                                        style="background: #d1d1d1; border: black solid 0.5px;" readonly>
                                </div>
                                <div class="md-form mb-3">
                                    <input type="text" name="Tel" value="<%= item.Tel %>" class="form-control validate"
                                        style="background: #d1d1d1; border: black solid 0.5px;" readonly>
                                </div>
                                <div class="md-form mb-3">
                                    <input type="text" name="amount" placeholder="จำนวณผู้โดยสาร *"
                                        class="form-control validate">
                                </div>
                                <button type="submit" class="btn-rgt">ยืนยัน</button>
                                <% }) %>
                        </form>

                    </div>
                    <div class="modal-footer d-flex justify-content-center border-top-0">
                    </div>
                </div>
            </div>
        </div>
        <!-- history -->
        <div class="container">
            <div class="modal" id="history">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h4 class="modal-title w-100">ประวัติการซื้อตั๋ว</h4>
                            <button class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body text-form">
                            <% if(ses==true){ %>
                                <div class="md-form mb-3 text-order">
                                    <% if(orderHis !=0){ %>
                                        <% orderHis.forEach(function(data){ %>
                                            <h5>วันที่ <span>
                                                    <%= data.Time_Date.toLocaleDateString() %>
                                                </span> สถานีต้นทาง <span>
                                                    <%= data.Source %>
                                                </span>
                                                สถานีปลายทาง <span>
                                                    <%= data.Destination %>
                                                </span> จำนวณผู้โดยสาร <span>
                                                    <%= data.Amount %>
                                                </span> คน
                                            </h5>
                                            <hr>
                                            <% }) %>
                                                <% }else{ %>
                                                    <h3>ไม่มีประวัติการซื้อตั๋ว</h3>
                                                    <% } %>

                                </div>
                                <% }else{ %>
                                    <div class="md-form mb-3">
                                        <h5> ยังไม่เข้าสู่ระบบ </h5>
                                    </div>
                                    <% } %>


                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- cancel -->
        <div class="container">
            <div class="modal" id="cancel">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h4 class="modal-title w-100">ยกเลิกตั๋วโดยสาร</h4>
                            <button class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <% if(ses==true){ %>
                                <form action="cancelOrder" method="post">
                                    <div class="md-form mb-3 text-order">
                                        <% if(orderHis !=0){ %>
                                            <% orderHis.forEach(function(data){ %>
                                                <h5>วันที่ <span>
                                                        <%= data.Time_Date.toLocaleDateString() %>
                                                    </span> สถานีต้นทาง <span>
                                                        <%= data.Source %>
                                                    </span>
                                                    สถานีปลายทาง <span>
                                                        <%= data.Destination %>
                                                    </span> จำนวณผู้โดยสาร <span>
                                                        <%= data.Amount %>
                                                    </span> คน <span class="cancel-btn">
                                                        <button name="orderid" value="<%= data.Order_Id %>"
                                                            onclick="return confirm('ยืนยันยกเลิกการจองตั๋วหรือไม่ ?')">ยกเลิกตั๋ว</button>
                                                    </span>
                                                </h5>
                                                <hr>
                                                <% }) %>
                                                    <% }else{ %>
                                                        <h3>ไม่มีประวัติการซื้อตั๋ว</h3>
                                                        <% } %>
                                    </div>
                                </form>
                                <% }else{ %>
                                    <div class="md-form mb-3">
                                        <h5> ยังไม่เข้าสู่ระบบ </h5>
                                    </div>
                                    <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- change -->
        <div class="container">
            <div class="modal" id="change">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h4 class="modal-title w-100">ยกเลิกตั๋วโดยสาร</h4>
                            <button class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <% if(ses==true){ %>
                                <form action="changeOrder" method="post">
                                    <div class="md-form mb-3 text-order">
                                        <% if(orderHis !=0){ %>
                                            <% orderHis.forEach(function(data){ %>
                                                <h5>วันที่ <span>
                                                        <%= data.Time_Date.toLocaleDateString() %>
                                                    </span> สถานีต้นทาง <span>
                                                        <%= data.Source %>
                                                    </span>
                                                    สถานีปลายทาง <span>
                                                        <%= data.Destination %>
                                                    </span> จำนวณผู้โดยสาร <span>
                                                        <%= data.Amount %>
                                                    </span> คน <span class="cancel-btn">
                                                        <button name="orderid" value="<%= data.Order_Id %>"
                                                            onclick="return confirm('ยืนยันยกเลิกการจองตั๋วหรือไม่ ?')">เปลี่ยน</button>
                                                    </span>
                                                </h5>
                                                <hr>
                                                <% }) %>
                                                    <% }else{ %>
                                                        <h3>ไม่มีประวัติการซื้อตั๋ว</h3>
                                                        <% } %>
                                    </div>
                                </form>
                                <% }else{ %>
                                    <div class="md-form mb-3">
                                        <h5> ยังไม่เข้าสู่ระบบ </h5>
                                    </div>
                                    <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- passenger information -->
    <section>
        <div class="con-order">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="text-route text-center">
                            <h2>เปลี่ยนแปลงตั๋ว</h2>
                        </div>
                    </div>
                </div>
                <form action="change_order" method="post">
                    <div class="row detail-box gx-0">
                        <div class="col-12 p-2">
                            <h2>ค้นหาขบวนรถไฟ</h2>
                            <div class="hr-detail"></div>
                        </div>
                        <div class="col-1 col-md-1 col-lg-1 text-center ">
                            <span style="font-size: 21px;">ไปกลับ</span>
                            <label class="switch mt-1">
                                <input type="checkbox">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="col-2 col-md-2 col-lg-2 text-center select-style">
                            <select name="Source">
                                <option value="origin" selected>ต้นทาง</option>
                                <% routedata.forEach(function(data){ %>
                                    <option value=<%=data.Source %>><%= data.Source %>
                                    </option>
                                    <% }) %>
                            </select>
                        </div>
                        <div class="col-2 col-md-2 col-lg-2 text-center select-style">
                            <select name="Destination">
                                <option value="destination" selected>ปลายทาง</option>
                                <% routedata.forEach(function(data){ %>
                                    <option value=<%=data.Destination %>><%= data.Destination %>
                                    </option>
                                    <% }) %>
                            </select>
                        </div>
                        <div class="col-2 col-md-2 col-lg-2 text-center select-style">
                            <select>
                                <option selected>วันที่เดินทาง</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                            </select>
                        </div>
                        <div class="col-2 col-md-2 col-lg-2 text-center select-style">
                            <select disabled style="background: #bbb8b8; color: rgb(44, 24, 1);">
                                <option selected>วันเดินทางกลับ</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                            </select>
                        </div>
                        <div class="col-2 col-md-2 col-lg-2 text-center select-style">
                            <select>
                                <option selected>ผู้โดยสาร</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                            </select>
                        </div>
                        <div class="col-1 col-md-1 col-lg-1 bt-con ">
                            <button type="submit" id="confirm-button">ยืนยัน</button>
                        </div>
                        <div class="col-md-12 text-end mt-4">
                            <a href="" style="font-size: 25px; color: #c48a0e;">
                                ท่องเที่ยวกับการรถไฟแห่งประเทศไทย
                            </a>
                        </div>
                    </div>
                    <% if(statusChange !=false){ %>
                        <div class="row">
                            <div class="content-Route">
                                <div class="show-route">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="text-route">
                                                    <h5>เลือกขบวนโดยสารเส้นทาง</h5>
                                                    <p><span>
                                                            <%= origin %>
                                                        </span> --> <span>
                                                            <%= goal %>
                                                        </span></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 content-route-show">
                                                <div class="text-center">
                                                    <% if(F_route !=0){ %>
                                                        <% F_route.forEach(function(item){ %>
                                                            <h5>ต้นทาง <span style="color:#c48a0e;">
                                                                    <%= item.Source %>
                                                                </span> ปลายทาง <span style="color:#c48a0e;">
                                                                    <%= item.Destination %>
                                                                </span> <span> วันที่ <%= dateTime %> </span> <span><a
                                                                        href="" data-bs-target="#info-form"
                                                                        data-bs-toggle="modal">เลือกเส้นทาง</a></span>
                                                            </h5>
                                                            <% }) %>
                                                                <% }else{ %>
                                                                    <h1>ไม่พบข้อมูล</h1>
                                                                    <% } %>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <% }else{ %>
                            <% } %>
                </form>
            </div>
        </div>
    </section>
    <!-- script Show Route -->
    <script src=" assets/js/navbar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous">
        </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.0/mdb.min.js"></script>
</body>

</html>